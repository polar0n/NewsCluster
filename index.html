<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Two News Article Clusters</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #1b1b1b; /* Dark background */
        }
        .node {
            cursor: pointer;
            stroke: #fff;
            stroke-width: 1.5px;
        }
        .link {
            fill: none;
            stroke: #999;
            stroke-opacity: 0.6;
            stroke-width: 1.5px;
        }
        .tooltip {
            position: absolute;
            background-color: #333;
            color: #fff;
            padding: 8px;
            border-radius: 4px;
            font-size: 12px;
            pointer-events: none;
            display: none;
            z-index: 10;
        }
    </style>
</head>
<body>
    <div id="tooltip" class="tooltip"></div>
    <svg width="100%" height="100%"></svg>

    <script>
        var width = window.innerWidth,
            height = window.innerHeight;

        var svg = d3.select("svg")
            .attr("width", width)
            .attr("height", height)
            .call(d3.zoom().scaleExtent([0.1, 10]).on("zoom", zoomed))
            .append("g");

        var tooltip = d3.select("#tooltip");

        var nodesCluster1 = [
            {id: "Cluster 1 - Article 1", url: "https://example.com/article1"},
            {id: "Cluster 1 - Article 2", url: "https://example.com/article2"},
            {id: "Cluster 1 - Article 3", url: "https://example.com/article3"},
            {id: "Cluster 1 - Article 4", url: "https://example.com/article4"},
            {id: "Cluster 1 - Article 5", url: "https://example.com/article5"},
            {id: "Cluster 1 - Article 6", url: "https://example.com/article6"}
        ];

        var nodesCluster2 = [
            {id: "Cluster 2 - Article 1", url: "https://example.com/article7"},
            {id: "Cluster 2 - Article 2", url: "https://example.com/article8"},
            {id: "Cluster 2 - Article 3", url: "https://example.com/article9"},
            {id: "Cluster 2 - Article 4", url: "https://example.com/article10"},
            {id: "Cluster 2 - Article 5", url: "https://example.com/article11"},
            {id: "Cluster 2 - Article 6", url: "https://example.com/article12"}
        ];

        // Combine nodes
        var nodes = nodesCluster1.concat(nodesCluster2);

        var simulation = d3.forceSimulation(nodes)
            .force("charge", d3.forceManyBody().strength(-300))
            .force("center", d3.forceCenter(width / 2, height / 2))
            .force("collision", d3.forceCollide(20))
            // Separation force for cluster 1
            .force("cluster1", d3.forceX(function(d) {
                return d.id.includes("Cluster 1") ? width / 3 : width / 1.5;
            }).strength(0.5))
            // Separation force for cluster 2
            .force("cluster2", d3.forceY(function(d) {
                return d.id.includes("Cluster 2") ? height / 3 : height / 1.5;
            }).strength(0.5));

        var node = svg.append("g")
            .attr("class", "nodes")
            .selectAll("circle")
            .data(nodes)
            .enter().append("circle")
            .attr("class", "node")
            .attr("r", 10)
            .on("click", function(event, d) {
                window.open(d.url, "_blank");
            })
            .on("mouseover", function(event, d) {
                tooltip.style("display", "block")
                       .html("Title: " + d.id + "<br>URL: " + d.url);
            })
            .on("mousemove", function(event) {
                tooltip.style("left", (event.pageX + 10) + "px")
                       .style("top", (event.pageY - 20) + "px");
            })
            .on("mouseout", function() {
                tooltip.style("display", "none");
            })
            .call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));

        node.append("title")
            .text(function(d) { return d.id; });

        simulation.on("tick", function() {
            node
                .attr("cx", function(d) { return d.x; })
                .attr("cy", function(d) { return d.y; });
        });

        function dragstarted(event, d) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
        }

        function dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }

        function dragended(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
        }

        function zoomed(event) {
            svg.attr("transform", event.transform);
        }

        // Smooth zooming with transition
        d3.select(window).on("wheel", function(event) {
            event.preventDefault();
            svg.transition().duration(300).call(
                d3.zoom().scaleBy, 1 - (event.deltaY * 0.01)
            );
        });
    </script>
</body>
</html>
